<!-- Navigation bar -->
<div class="navbar-fixed">
	<nav class="black">
		<div class="nav-wrapper">
			<div class="container">
				<a href="#" class="brand-logo red-text">TED<sup>2</sup></a>
				<ul id="nav-mobile" class="right">
					<li><a class="pointer" href="/logout">Logout</a></li>
					<li><a class="pointer" id="speakerButton">Speaker Search</a></li>
					<li><a class="pointer" id="subjectButton">Subject Search</a></li>
				</ul>
			</div>
		</div>
	</nav>
</div>

<div class="container">
	<div class="row" id="speakerCard">
		<div class="col s12">
			<div class="card black ted-card">
				<div class="card-content white-text">
					<div class = "row" id="searchSpeaker">
						<span class="card-title">Search for a Speaker</span>
						<form name="speaker-form">
							<div class="input-field col s12">
								<input placeholder="Speaker" id="speakerName" type="text" class="validate">
								<label for="speakerName">Speaker Name</label>
								<button id="speakerBtn" type="submit" class="btn waves-effect red">Submit</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="row" id="subjectCard">
		<div class="col s12">
			<div class="card black ted-card">
				<div class="card-content white-text">
					<div class = "row" id="searchSubject">
						<span class="card-title">Search on a Subject</span>
						<form name="subject-form">
							<div class="input-field col s12">
								<input placeholder="Subject" id="subjectName" type="text" class="validate">
								<label for="subjectName">Subject</label>
								<button id="subjectBtn" type="submit" class="btn waves-effect red">Submit</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	{{#talk}}
	<div class="row">
		<div class="col s12">
			<div class="card black ted-card" id="resultsCard">
				<div class="card-content white-text">
					<div id="talksList">
						<span class="card-title">{{this.main_speaker}} <a class="right btn red waves-effect vidButton" id="{{this.id}}">Video</a></span>
						<div id="vid{{this.id}}" style="position:relative;height:0;padding-bottom:56.25%;display:none">
							<iframe src="{{this.embed}}" 
								width="854" height="480" style="position:absolute;left:0;top:0;width:100%;height:100%" 
								frameborder="0" scrolling="no" allowfullscreen>
							</iframe>
						</div>
						<div>
							<a href="{{this.url}}" target="_blank">{{this.name}}</a>
						</div>
						<div>
							Page is: {{this.pageNum}}
						</div>
						<div>
							{{this.tags}}
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	{{/talk}}
</div>

<script>
	$(document).ready(function() {
		var speakerOpen = false;
		var subjectOpen = false;
		var videoOpen = false;

		$("#speakerCard").css("display", "none");
		$("#subjectCard").css("display", "none");

		$("#speakerButton").click(function() {
			if (!speakerOpen) {
				$("#speakerCard").css("display", "block");
				$("#subjectCard").css("display", "none");
				speakerOpen = true;
				subjectOpen = false;
			}
				else {
					$("#speakerCard").css("display", "none");
					searchOpen = false;
				}
		});

		$("#subjectButton").click(function() {
			if (!subjectOpen) {
				$("#subjectCard").css("display", "block");
				$("#speakerCard").css("display", "none");
				subjectOpen = true;
				speakerOpen = false;
			}
				else {
					$("#subjectCard").css("display", "none");
					subjectOpen = false;
				}
		});

		$("#speakerBtn").on("click", function(event) {
			event.preventDefault();
			var searchName = $("#speakerName").val().trim().toLowerCase();
			window.location.href = window.location.origin + "/ted2?name="+searchName;
        });

		$("#subjectBtn").on("click", function(event) {
			event.preventDefault();
			var subjectName = $("#subjectName").val().trim().toLowerCase();
			window.location.href = window.location.origin + "/ted2?subject="+subjectName;
        });

		$(".vidButton").on("click", function() {
			if ($("#vid" + this.id).css("display") === "block") {
				$("#vid" + this.id).css("display", "none");
			} else {
				$("#vid" + this.id).css("display", "block");
			}
		})
    });
</script>